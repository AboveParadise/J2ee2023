<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--字体图标-->
        <link href="https://javaex.javaex.cn/javaex-5.4.1/pc/css/icomoon.css" rel="stylesheet" />
        <!--动画-->
        <link href="https://javaex.javaex.cn/javaex-5.4.1/pc/css/animate.css" rel="stylesheet" />
        <!--骨架样式-->
        <link href="https://javaex.javaex.cn/javaex-5.4.1/pc/css/common.css" rel="stylesheet" />
        <!--皮肤（缇娜）-->
        <link href="https://javaex.javaex.cn/javaex-5.4.1/pc/css/skin/tina.css" rel="stylesheet" />
    <!--jquery，不可修改版本-->
    <script src="https://javaex.javaex.cn/javaex-5.4.1/pc/lib/jquery-1.7.2.min.js"></script>
    <!--全局动态修改-->
    <script src="https://javaex.javaex.cn/javaex-5.4.1/pc/js/common.js"></script>
    <!--核心组件-->
    <script src="https://javaex.javaex.cn/javaex-5.4.1//pc/js/javaex.min.js"></script>
    <!--表单验证-->
    <script src="https://javaex.javaex.cn/javaex-5.4.1/pc/js/javaex-formVerify.js"></script>

    <script src="https://javaex.javaex.cn/javaex-5.4.1/m/js/javaex.js"></script>

</head>
<body>
<div class="javaex-block has-border" style="max-width:820px; margin: 0;">
    <div class="javaex-main">
        <div class="javaex-desc">
            <div class="javaex-desc-header">
                <div class="javaex-desc-title">我的信息</div>
                <div class="javaex-desc-extra">
                    <button class="javaex-btn primary" size="small" onclick="updateinfo()">修改</button>
                </div>
            </div>
            <div class="javaex-desc-body">
                <table class="javaex-desc-table">
                    <tbody>
                    <tr>
                        <td class="javaex-desc-item javaex-desc-item-cell">
                            <div class="javaex-desc-item-container">
                                <span class="javaex-desc-item-label">昵称：</span>
                                <div class="javaex-desc-item-content" id="nickname"></div>
                            </div>
                        </td>
                        </tr>
                    <tr>
                        <td class="javaex-desc-item javaex-desc-item-cell">
                            <div class="javaex-desc-item-container">
                                <span class="javaex-desc-item-label">手机号：</span>
                                <div class="javaex-desc-item-content" id="tel"></div>
                            </div>
                        </td>
                        </tr>
                    <tr>
                        <td class="javaex-desc-item javaex-desc-item-cell">
                            <div class="javaex-desc-item-container">
                                <span class="javaex-desc-item-label">地址：</span>
                                <div class="javaex-desc-item-content" id="address"></div>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                    <tbody>
                    <tr>
                        <td class="javaex-desc-item javaex-desc-item-cell">
                            <div class="javaex-desc-item-container">
                                <span class="javaex-desc-item-label">生日：</span>
                                <div class="javaex-desc-item-content" id="birth"></div>
                            </div>
                        </td>
                        </tr>
                    <tr>
                        <td colspan="2" class="javaex-desc-item javaex-desc-item-cell">
                            <div class="javaex-desc-item-container">
                                <span class="javaex-desc-item-label">邮箱：</span>
                                <div class="javaex-desc-item-content" id="email"></div>
                            </div>
                        </td>
                        </tr>
                    <tr>
                        <td colspan="2" class="javaex-desc-item javaex-desc-item-cell">
                            <div class="javaex-desc-item-container">
                                <span class="javaex-desc-item-label">可借数量：</span>
                                <div class="javaex-desc-item-content" id="balance"></div>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

</body>
<script>
    javaex.select({
        id : "select",
        isSearch : false
    });
    let user;
    // 页面加载执行
    $(document).ready(function(){
        // get读取参数
        $.get("/user/currUser", function(data){
            user = data.data;

            let div1 = document.getElementById("balance");
            div1.innerText = user.balance;
            let div2 = document.getElementById("nickname");
            div2.innerText = user.nickname;
            let div4 = document.getElementById("birth")
            div4.innerText = user.birth.substring(0, 10);
            let div5 = document.getElementById("email");
            div5.innerText = user.email;
            let div6 = document.getElementById("address");
            div6.innerText = user.address;
            let div7 = document.getElementById("tel");
            div7.innerText = user.tel;


            return false;
        });
    });
    function updateinfo() {
        console.log("update info"+user.id);
        window.location.href="/user/userInfoUpdate?id="+user.id;
    }
</script>
</html>